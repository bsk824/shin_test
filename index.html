<!DOCTYPE html>
<html lang="ko">
<head>
<title></title>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi" name="viewport">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<script type="text/javascript" src="jquery-1.11.1.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script src="jquery.ui.touch.js"></script>
</head>
<body>
	<style type="text/css">
	* {margin:0;padding:0;text-align:center;}
	.wrap {position:relative;height:100px;margin:100px;border:1px solid red;}
	.bg {position:absolute;top:0;bottom:0;left:0;width:0;background:#000;}
	.btn {position:absolute;top:0;bottom:0;width:90px;padding:5px;background:none;border:0;z-index:2;}
	.btn span {display:block;width:100%;height:100%;background:red;}
	.chk {width:100px;height:100px;margin:0 auto;}
	</style>
	<script>
	$(function() {
		var chk = 0;
		function back(_this) {
			_this.animate({'left' : '0'},200);
			$('.bg').animate({'width' : '0'},200);
			chk = 0;
		}
		function end(_this) {
			_this.css('left','auto');
			_this.animate({'right' : '0'},200);
			$('.bg').animate({'width' : '100%'},200);
			chk = 1;
		}
		$(".btn").draggable({
			containment : 'parent',
			drag : function(){
				var pos = $(this).position().left;
				$('.bg').width(pos);
			},
			stop : function() {
				var _this = $(this)
					,wrap = _this.parent().width() / 2
					,pos = _this.position().left;
				(pos < wrap) ? back(_this) : end(_this) ;
			}
		});
		$('.chk').click(function(){
			(chk === 1) ? alert('on') : alert('off');
		})
	});
	</script>
	<div class="wrap">
		<div class="btn"><span></span></div>
		<div class="bg"></div>
	</div>

	<button type="button" class="chk">확인</button>


</body>
</html>
